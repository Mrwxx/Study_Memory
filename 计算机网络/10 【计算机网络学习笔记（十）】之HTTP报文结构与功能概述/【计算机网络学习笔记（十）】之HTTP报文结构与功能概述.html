<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>【计算机网络学习笔记（十）】之HTTP报文结构与功能概述</title>
  <link rel="stylesheet" href="https://stackedit.io/style.css" />
</head>

<body class="stackedit">
  <div class="stackedit__html"><p></p><div class="toc"><h3>文章目录</h3><ul><ul><li><a href="#_1">本文章由公号【开发小鸽】发布！欢迎关注！！！</a></li><li><a href="#%09HTTP_8">一．	HTTP报文</a></li><ul><li><a href="#%09_9">（一）	概述</a></li><li><a href="#%09_14">（二）	报文结构</a></li><ul><li><a href="#1%09_15">1.	概述</a></li><li><a href="#2%09_20">2.	请求报文</a></li><li><a href="#3%09_25">3.	响应报文</a></li></ul><li><a href="#%09_30">（三）	编码提升传输速率</a></li><ul><li><a href="#1%09_31">1.	概述</a></li><li><a href="#2%09_36">2.	报文主体和实体主体的差异</a></li><li><a href="#3%09_41">3.	压缩传输的内容编码</a></li><li><a href="#4%09_46">4.	分块传输编码</a></li></ul><li><a href="#%09_51">（四）	多类型实体集合</a></li><li><a href="#%09_56">（五）	范围请求</a></li><li><a href="#%09_61">（六）	内容协商</a></li></ul></ul></ul></div><p></p>
<h2><a id="_1"></a>本文章由公号【开发小鸽】发布！欢迎关注！！！</h2>
<br>
<p><strong>老规矩–妹妹镇楼：</strong></p>
<center>
<img src="https://img-blog.csdnimg.cn/20200721223424816.JPG" width="20%">
</center><h2><a id="%09HTTP_8"></a>一．	HTTP报文</h2>
<h3><a id="%09_9"></a>（一）	概述</h3>
<p>&nbsp;  &nbsp;  &nbsp;  &nbsp;用于HTTP协议交互的信息称为HTTP报文，客户端的HTTP报文称为请求报文，服务器端的叫做响应报文，HTTP报文是由多行（用CR+LF作换行符）数据构成的字符串文本。CR是Carriage Return回车符，LF是Line Feed换行符。<br>
<br></p>
<h3><a id="%09_14"></a>（二）	报文结构</h3>
<h4><a id="1%09_15"></a>1.	概述</h4>
<p>&nbsp;  &nbsp;  &nbsp;  &nbsp;HTTP报文大致可分为报文首部和报文主体两块，由空行（CR+LF）来划分，通常并不一定有报文主体。<br>
<br></p>
<h4><a id="2%09_20"></a>2.	请求报文</h4>
<p>&nbsp;  &nbsp;  &nbsp;  &nbsp;请求报文由请求首部和请求体构成，请求首部又分为请求行和请求首部字段，请求行包含用于请求的方法，请求URI和HTTP版本，如GET /index HTTP/1.1；请求首部字段包含各种类型的首部字段，一般有四种首部，通用首部，请求首部，响应首部和实体首部。<br>
<br></p>
<h4><a id="3%09_25"></a>3.	响应报文</h4>
<p>&nbsp;  &nbsp;  &nbsp;  &nbsp;响应报文由响应首部和响应体构成，响应首部又分为状态行和响应首部字段，状态行包含表名响应结果的状态码，原因短语和HTTP版本，如HTTP1.1 200 OK；响应首部字段包含各种类型的首部字段，一般有四种首部，通用首部，请求首部，响应首部和实体首部。<br>
<br></p>
<h3><a id="%09_30"></a>（三）	编码提升传输速率</h3>
<h4><a id="1%09_31"></a>1.	概述</h4>
<p>&nbsp;  &nbsp;  &nbsp;  &nbsp;HTTP传输数据时可以按照数据原貌直接传输，也可以在传输过程中通过编码提升传输速率。<br>
<br></p>
<h4><a id="2%09_36"></a>2.	报文主体和实体主体的差异</h4>
<p>&nbsp;  &nbsp;  &nbsp;  &nbsp;报文是HTTP通信的基本单位，由8位组字节流组成；实体作为请求或响应的有效载荷数据被传输，其内容由实体首部和实体主体构成。HTTP报文的主体用于传输请求或响应的实体主体，通常，报文主体等于实体主体，只有当传输中进行了编码操作时，实体主体的内容才会发生变化。<br>
<br></p>
<h4><a id="3%09_41"></a>3.	压缩传输的内容编码</h4>
<p>&nbsp;  &nbsp;  &nbsp;  &nbsp;HTTP协议中的内容编码指明了应用在实体内容上的编码格式，并保持实体信息原样压缩，内容编码后的实体由客户端接受并负责解码。常用的内容编码有gzip，compress，deflate，identity。<br>
<br></p>
<h4><a id="4%09_46"></a>4.	分块传输编码</h4>
<p>&nbsp;  &nbsp;  &nbsp;  &nbsp;在HTTP通信中，如果请求的编码实体资源尚未传输完成之前，浏览器是无法显示请求页面的，在传输大量数据时，可以通过将数据分割为多块，让浏览器逐步显示页面。这种将实体主体分块的功能称为分块传输编码，将实体主体分割为多块，每一块都会用十六进制来标记块的大小，最后一块用0(CR+LF)标记。<br>
<br></p>
<h3><a id="%09_51"></a>（四）	多类型实体集合</h3>
<p>&nbsp;  &nbsp;  &nbsp;  &nbsp;HTTP协议发送的一份报文实体中可以包含多类型实体，通常在图片或文本文件等上传时使用。如multipart/form-data，multipart/byteranges。使用多类型实体集合时，需要在首部字段中加上Content-type字段，表示包含的类型，同时使用boundary字符串来划分各类型实体，在该划分符号之前插入–标记，每一个–标记代表一个类型实体，整个集合的结束标记是在划分符号之后也插入一个–标记。<br>
<br></p>
<h3><a id="%09_56"></a>（五）	范围请求</h3>
<p>&nbsp;  &nbsp;  &nbsp;  &nbsp;为了解决下载中断问题，HTTP可以实现资源的范围请求，只请求一部分资源，这样就可以从下载中断的位置继续下载了。需要使用Range字段来设置请求的范围，针对该请求，响应会返回状态码为206的响应报文，如果无法响应范围请求，则返回200和完整的实体内容。<br>
<br></p>
<h3><a id="%09_61"></a>（六）	内容协商</h3>
<p>&nbsp;  &nbsp;  &nbsp;  &nbsp;同一个Web网站可能有多份相同内容的页面，使用的语言不同，当浏览器的默认语言为中文时，访问相同URI的web页面就会显示中文的页面，这种机制称为内容协商。即客户端和服务器端就响应的资源内容进行交涉，提供给客户端最合适的资源，判断标准是语言，字符集，编码方式等。</p>
<p>&nbsp;  &nbsp;  &nbsp;  &nbsp;内容协商有三种类型，一种是服务器驱动协商，以请求的首部字段为参考，在服务器端自动处理；一种是客户端驱动协商，由用于从可视化的界面选择；另一种是透明协商，有服务器端和客户端一起协商。</p>
</div>
</body>

</html>
