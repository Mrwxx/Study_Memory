<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>【C++学习笔记（三十七）】之仿函数（函数对象）</title>
  <link rel="stylesheet" href="https://stackedit.io/style.css" />
</head>

<body class="stackedit">
  <div class="stackedit__html"><h2><a id="_0"></a>一．仿函数（函数对象）</h2>
<p>&nbsp;  &nbsp;  &nbsp;  &nbsp;<strong>重载了函数调用操作符“（）“的类，其对象称为函数对象</strong>，因为该类能够像函数一样调用，因此也叫仿函数。<br>
<br></p>
<h2><a id="_4"></a>二．分类：</h2>
<br>
&nbsp;  &nbsp;  &nbsp;  &nbsp;1. 一元仿函数  重载operator()函数中有一个参数
<br>
<p>&nbsp;  &nbsp;  &nbsp;  &nbsp;2. 二元仿函数  重载operator()函数中有两个参数<br>
<br></p>
<h2><a id="_14"></a>三．仿函数调用方式：</h2>
<br>
<p>&nbsp;  &nbsp;  &nbsp;  &nbsp;1. 可以用<strong>函数调用</strong>的方式调用	MyPrint(100)</p>
<p>&nbsp;  &nbsp;  &nbsp;  &nbsp;2. 也可以用<strong>匿名对象</strong>的方式调用	MyPrint()(100);<br>
<br></p>
<h2><a id="_22"></a>四．总结</h2>
<p><strong>&nbsp;  &nbsp;  &nbsp;  &nbsp;1. 函数对象超过函数，内部保存状态，因为仿函数是一个类，类中的成员变量都可以保存该类的状态。</strong></p>
<p>&nbsp;  &nbsp;  &nbsp;  &nbsp;2. 函数对象通常不会构造函数和析构函数，所以在构造和析构时不会发生任何问题，避免了函数调用的运行时问题。</p>
<p>&nbsp;  &nbsp;  &nbsp;  &nbsp;3. 可内联编译，性能好</p>
<p><strong>&nbsp;  &nbsp;  &nbsp;  &nbsp;4. 可以作为类型，与模板配合使用（参照之前set容器使用仿函数自定义排序规则）</strong><br>
<br></p>
<h2><a id="_32"></a>五．代码</h2>
<pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">MyPrint</span>
<span class="token punctuation">{</span>
<span class="token keyword">public</span>：
	<span class="token keyword">void</span> <span class="token keyword">operator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token keyword">int</span> num<span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		cout <span class="token operator">&lt;&lt;</span> num <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	MyPrint myPrint<span class="token punctuation">;</span>
	<span class="token function">myPrint</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">[</span>
	<span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
</div>
</body>

</html>
