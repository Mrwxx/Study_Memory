<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>【Java学习笔记（四十）】之AJAX，Json介绍</title>
  <link rel="stylesheet" href="https://stackedit.io/style.css" />
</head>

<body class="stackedit">
  <div class="stackedit__html"><h2><a id="_0"></a>本文章由公号【开发小鸽】发布！欢迎关注！！！</h2>
<br>
<p><strong>老规矩–妹妹镇楼：</strong></p>
<center>
<img src="https://img-blog.csdnimg.cn/20200721223424816.JPG" width="20%">
</center><h2><a id="%09AJAX_7"></a>一．	AJAX</h2>
<h3><a id="%09_8"></a>（一）	概述</h3>
<p>&nbsp;  &nbsp;  &nbsp;  &nbsp;Asynchronous JavaScript And XML，异步的JavaScript和XML。所谓的异步指的是客户端不需要等待服务器端的响应，在服务器daun处理请求的过程中，客户端可以进行其他的操作。<br>
<br></p>
<h3><a id="%09_13"></a>（二）	优势</h3>
<p>&nbsp;  &nbsp;  &nbsp;  &nbsp;Ajax是一种在无需重新加载整个网页的情况下，更新部分网页的技术。通过在后台与服务器进行少量数据交换，Ajax可以使网页实现异步更新。<br>
<br></p>
<h3><a id="%09_19"></a>（三）	实现方式</h3>
<h4><a id="1%09JQuery_20"></a>1.	JQuery实现</h4>
<h5><a id="1ajax_21"></a>（1）$.ajax()</h5>
<p>&nbsp;  &nbsp;  &nbsp;  &nbsp;通过$.ajax()方法发送异步请求，在ajax方法的参数中传入一些参数，如请求路径，请求方式，请求参数，响应成功后的回调函数…<br>
<br></p>
<pre><code class="prism language-javascript">$<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	url<span class="token punctuation">:</span>”ajaxServlet”<span class="token punctuation">,</span>		<span class="token comment">//请求路径</span>
	type<span class="token punctuation">:</span>”<span class="token constant">POST</span>”<span class="token punctuation">,</span>				<span class="token comment">//请求方式</span>
	data<span class="token punctuation">:</span><span class="token punctuation">{</span>“username”<span class="token punctuation">:</span>”jack”<span class="token punctuation">,</span> “age”<span class="token punctuation">:</span><span class="token number">23</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token comment">//请求参数</span>
	success<span class="token punctuation">:</span><span class="token keyword">function</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token function">alert</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>						<span class="token comment">//响应成功后的回调函数</span>
	error<span class="token punctuation">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token function">alert</span><span class="token punctuation">(</span>“error”<span class="token punctuation">)</span><span class="token punctuation">;</span>	
	<span class="token punctuation">}</span>						<span class="token comment">//请求响应出现错误的回调函数</span>
	datatype<span class="token punctuation">:</span>”text”			<span class="token comment">//响应的数据类型</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<br>
<h5><a id="2get_45"></a>（2）$.get()</h5>
<p>&nbsp;  &nbsp;  &nbsp;  &nbsp;用于发送get请求</p>
<p>如：</p>
<pre><code class="prism language-javascript">$<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span>
	“ajaxServlet”<span class="token punctuation">,</span> 
	<span class="token punctuation">{</span>username<span class="token punctuation">:</span>”rose”<span class="token punctuation">}</span><span class="token punctuation">,</span> 
	<span class="token keyword">function</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token function">alert</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">.</span> 
	“text”
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<br>
<h5><a id="3post_64"></a>（3）$.post</h5>
<p>&nbsp;  &nbsp;  &nbsp;  &nbsp;发送POST请求，参数与$.get方法一样的。</p>
<br>
<h2><a id="%09JSON_71"></a>二．	JSON</h2>
<h3><a id="%09_72"></a>（一）	概述</h3>
<p>&nbsp;  &nbsp;  &nbsp;  &nbsp;JavaScript Object Notation，JavaScript对象表示法。JSON将数据打包成对象进行传输，多用于存储和交换文本信息，进行数据的传输。语法类似于XML，但是比XML更小，更快，更易解析。<br>
<br></p>
<h3><a id="%09_78"></a>（二）	语法</h3>
<h4><a id="1%09_79"></a>1.	基本语法</h4>
<p>&nbsp;  &nbsp;  &nbsp;  &nbsp;（1）	数据在名称/值对中：json数据是由键值对构成的。</p>
<p>&nbsp;  &nbsp;  &nbsp;  &nbsp;键用引号（单双）引起来，也可以不用引号；</p>
<p>&nbsp;  &nbsp;  &nbsp;  &nbsp;值可以嵌套json对象以及json对象数组</p>
<p>&nbsp;  &nbsp;  &nbsp;  &nbsp;（2）	数据由逗号分隔，多个键值对由逗号分隔。</p>
<p>&nbsp;  &nbsp;  &nbsp;  &nbsp;（3）	使用花括号将json对象括起来。</p>
<p>&nbsp;  &nbsp;  &nbsp;  &nbsp;（4）	方括号保存json对象数组<br>
<br></p>
<h4><a id="2%09json_96"></a>2.	获取json对象数据</h4>
<h5><a id="1%09json_97"></a>（1）	json对象.键名</h5>
<p>&nbsp;  &nbsp;  &nbsp;  &nbsp;这个键名不用带引号。</p>
<pre><code class="prism language-javascript">persons<span class="token punctuation">.</span>name
</code></pre>
<br>
<h5><a id="2%09json_107"></a>（2）	json对象[“键名”]</h5>
<pre><code class="prism language-javascript">person<span class="token punctuation">[</span>“name”<span class="token punctuation">]</span>
</code></pre>
<br>
<h3><a id="%09jsonjava_116"></a>（三）	json数据和java对象的相互转换</h3>
<h4><a id="1%09Javajson_117"></a>1.	Java对象转换为json数据</h4>
<p>&nbsp;  &nbsp;  &nbsp;  &nbsp;（1）	导入json的解析器，如Jsonlib, Gson, fastjson, Jackson.这里我们导入jackson的Jar包</p>
<p>&nbsp;  &nbsp;  &nbsp;  &nbsp;（2）	创建Jackson的核心对象，ObjectMapper</p>
<pre><code class="prism language-java">ObjectMapper mapper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>&nbsp;  &nbsp;  &nbsp;  &nbsp;（3）	调用ObjectMapper的相关方法进行转换</p>
<p>第一个转换方法：</p>
<pre><code class="prism language-java"><span class="token function">writeValue</span><span class="token punctuation">(</span>参数<span class="token number">1</span>， obj<span class="token punctuation">)</span>
</code></pre>
<p>参数1：<br>
&nbsp;  &nbsp;  &nbsp;  &nbsp;File, 将obj对象转换为json字符串，并保存到指定的File文件中。</p>
<p>&nbsp;  &nbsp;  &nbsp;  &nbsp;Writer，将obj对象转换为json字符串，并将json数据填充到字符输出流中。</p>
<p>&nbsp;  &nbsp;  &nbsp;  &nbsp;OutputStream，将obj对象转换为json字符串，并将json数据填充到字节输出流中。</p>
<pre><code class="prism language-java">mapper<span class="token punctuation">.</span><span class="token function">writeValue</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span>“<span class="token punctuation">.</span>/a<span class="token punctuation">,</span>txt”<span class="token punctuation">)</span><span class="token punctuation">,</span> p<span class="token punctuation">)</span><span class="token punctuation">;</span>
mapper<span class="token punctuation">.</span><span class="token function">writeValue</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileWriter</span><span class="token punctuation">(</span>“<span class="token punctuation">.</span>/b<span class="token punctuation">.</span>txt”<span class="token punctuation">)</span><span class="token punctuation">,</span> p<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<br>
<p>第二个转换方法：</p>
<pre><code class="prism language-java"><span class="token function">writeValueAsString</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>
</code></pre>
<p>将obj对象转换为json字符串</p>
<pre><code class="prism language-java">String json <span class="token operator">=</span> mapper<span class="token punctuation">.</span><span class="token function">writeValueAsString</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span>
</code></pre>
<br>
<h5><a id="4%09_164"></a>（4）	注解的使用</h5>
<p>&nbsp;  &nbsp;  &nbsp;  &nbsp;@JsonIgnore 用于忽略某些键值对，将该注解放置于Java对象的属性定义之上，那么转换成json数据时，就会自动忽略该属性：</p>
<pre><code class="prism language-java"><span class="token annotation punctuation">@JsonIgnore</span>
<span class="token keyword">private</span> String name<span class="token punctuation">;</span>
</code></pre>
<br>
<p>&nbsp;  &nbsp;  &nbsp;  &nbsp;@JsonFormat， 用于调整属性的格式：</p>
<pre><code class="prism language-java"><span class="token annotation punctuation">@JsonFormat</span><span class="token punctuation">(</span>pattern<span class="token operator">=</span>“yyyy<span class="token operator">-</span>MM<span class="token operator">-</span>dd”<span class="token punctuation">)</span>
<span class="token keyword">private</span> Date birthday<span class="token punctuation">;</span>
</code></pre>
<br>
<h5><a id="5%09listmapjson_186"></a>（5）	list和map转换为json</h5>
<p>&nbsp;  &nbsp;  &nbsp;  &nbsp;list转换为json数据的格式为json对象数组。</p>
<p>&nbsp;  &nbsp;  &nbsp;  &nbsp;map转换为json数据的格式为json对象。<br>
<br></p>
<h4><a id="2%09jsonJava_194"></a>2.	json数据转换为Java对象</h4>
<p>&nbsp;  &nbsp;  &nbsp;  &nbsp;（1）	导入jackson解析器的jar包</p>
<p>&nbsp;  &nbsp;  &nbsp;  &nbsp;（2）	创建jackson的核心对象 ObjectMapper</p>
<p>&nbsp;  &nbsp;  &nbsp;  &nbsp;（3）	调用ObjectMapper的如下方法：</p>
<p>&nbsp;  &nbsp;  &nbsp;  &nbsp;readValue(json字符串数据，Java对象的Class)</p>
<pre><code class="prism language-java">String json <span class="token operator">=</span> “<span class="token punctuation">{</span>\”gender\”<span class="token operator">:</span>\”男\”<span class="token punctuation">,</span> \”name\’<span class="token operator">:</span>\”张三\”<span class="token punctuation">}</span>”<span class="token punctuation">;</span>
ObjectMapper mapper <span class="token operator">=</span> <span class="token function">readValue</span><span class="token punctuation">(</span>json<span class="token punctuation">,</span> Person<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
</div>
</body>

</html>
